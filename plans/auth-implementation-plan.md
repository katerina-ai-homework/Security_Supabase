# ะะปะฐะฝ ัะตะฐะปะธะทะฐัะธะธ ัะธััะตะผั ะฐััะตะฝัะธัะธะบะฐัะธะธ ัะตัะตะท Supabase

## ะะฑะทะพั ะฟัะพะตะบัะฐ

ะขะตะบััะธะน ะฟัะพะตะบั โ ััะพ YouTube Summarizer ะฟัะธะปะพะถะตะฝะธะต ะฝะฐ Next.js 16 ั TypeScript. ะะตะพะฑัะพะดะธะผะพ ะดะพะฑะฐะฒะธัั ัะธััะตะผั ัะตะณะธัััะฐัะธะธ ะธ ะฐะฒัะพัะธะทะฐัะธะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ัะตัะตะท Supabase ั ัะธััะตะผะพะน ะบัะตะดะธัะพะฒ.

## ะััะธัะตะบัััะฐ ัะธััะตะผั

```mermaid
flowchart TD
    A[ะะพะปัะทะพะฒะฐัะตะปั] --> B{ะะฒัะพัะธะทะพะฒะฐะฝ?}
    B -->|ะะตั| C[ะกััะฐะฝะธัะฐ ะฒัะพะดะฐ/ัะตะณะธัััะฐัะธะธ]
    B -->|ะะฐ| D[ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ]
    C --> E[ะะตะณะธัััะฐัะธั]
    C --> F[ะัะพะด]
    E --> G[ะกะพะทะดะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ auth.users]
    G --> H[ะขัะธะณะณะตั: ัะพะทะดะฐะฝะธะต ะฟัะพัะธะปั ั 5 ะบัะตะดะธัะฐะผะธ]
    H --> D
    F --> D
    D --> I[ะัะพะฑัะฐะถะตะฝะธะต ะบัะตะดะธัะพะฒ]
    D --> J[ะัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตัะฒะธัะฐ]
    J --> K[ะกะฟะธัะฐะฝะธะต ะบัะตะดะธัะฐ]
    K --> I
```

## ะกัััะบัััะฐ ะฑะฐะทั ะดะฐะฝะฝัั

### ะขะฐะฑะปะธัะฐ profiles

```sql
create table profiles (
  id uuid references auth.users not null primary key,
  email text,
  credits integer default 5,
  created_at timestamp with time zone default timezone('utc'::text, now()),
  updated_at timestamp with time zone default timezone('utc'::text, now())
);
```

### ะขัะธะณะณะตั ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ัะพะทะดะฐะฝะธั ะฟัะพัะธะปั

ะัะธ ัะตะณะธัััะฐัะธะธ ะฝะพะฒะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัััั ะฟัะพัะธะปั ั 5 ะบัะตะดะธัะฐะผะธ.

### RLS ะฟะพะปะธัะธะบะธ

- ะะพะปัะทะพะฒะฐัะตะปะธ ะผะพะณัั ัะธัะฐัั ัะพะปัะบะพ ัะฒะพะน ะฟัะพัะธะปั
- ะะพะปัะทะพะฒะฐัะตะปะธ ะผะพะณัั ะพะฑะฝะพะฒะปััั ัะพะปัะบะพ ัะฒะพะน ะฟัะพัะธะปั

## ะะพะผะฟะพะฝะตะฝัั ัะธััะตะผั

### 1. ะกััะฐะฝะธัะฐ ะฒัะพะดะฐ/ัะตะณะธัััะฐัะธะธ

**ะะฐััััั:** `/login`

ะะดะธะฝะฐั ัััะฐะฝะธัะฐ ั ะฟะตัะตะบะปััะตะฝะธะตะผ ะผะตะถะดั ัะตะถะธะผะฐะผะธ:
- ะัะพะด
- ะะตะณะธัััะฐัะธั

**ะคัะฝะบัะธะพะฝะฐะป:**
- ะะพะปะต email
- ะะพะปะต password
- ะะฝะพะฟะบะฐ ะฒัะพะดะฐ/ัะตะณะธัััะฐัะธะธ
- ะะตัะตะบะปััะฐัะตะปั ะผะตะถะดั ัะตะถะธะผะฐะผะธ
- ะะฐะปะธะดะฐัะธั ะฟะพะปะตะน
- ะัะพะฑัะฐะถะตะฝะธะต ะพัะธะฑะพะบ

### 2. ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ ั ะบัะตะดะธัะฐะผะธ

**ะะทะผะตะฝะตะฝะธั ะฒ ัััะตััะฒัััะตะน ัััะฐะฝะธัะต:**
- ะะพะฑะฐะฒะธัั ะฟัะพะฒะตัะบั ะฐะฒัะพัะธะทะฐัะธะธ
- ะัะพะฑัะฐะทะธัั ะบะพะปะธัะตััะฒะพ ะบัะตะดะธัะพะฒ ะฒ header
- ะะพะฑะฐะฒะธัั ะบะฝะพะฟะบั ะฒััะพะดะฐ
- ะะพะบะฐะทัะฒะฐัั ัะพัะผั ะฒัะพะดะฐ ะดะปั ะฝะตะฐะฒัะพัะธะทะพะฒะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน

### 3. API ัะพััั

**`/api/auth/signup`** - ะะตะณะธัััะฐัะธั
**`/api/auth/signin`** - ะัะพะด
**`/api/auth/signout`** - ะััะพะด
**`/api/auth/user`** - ะะพะปััะตะฝะธะต ะดะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปั

### 4. Middleware

ะะฐัะธัะฐ ัะพััะพะฒ ะธ ะพะฑะฝะพะฒะปะตะฝะธะต ัะตััะธะธ.

## ะะฐัััะพะนะบะธ Supabase

### ะัะบะปััะตะฝะธะต ะฟะพะดัะฒะตัะถะดะตะฝะธั email

ะะปั ัะตะณะธัััะฐัะธะธ ะฑะตะท ะฟะพะดัะฒะตัะถะดะตะฝะธั email ะฝะตะพะฑัะพะดะธะผะพ:
1. ะ Dashboard ะฟะตัะตะนัะธ ะฒ Authentication โ Providers
2. ะะปั Email ะฟัะพะฒะฐะนะดะตัะฐ ะพัะบะปััะธัั "Confirm email"

ะะปะธ ัะตัะตะท SQL:

```sql
-- ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟะพะดัะฒะตัะถะดะตะฝะธะต email ะฟัะธ ัะตะณะธัััะฐัะธะธ
update auth.users 
set email_confirmed_at = now() 
where email_confirmed_at is null;
```

## ะะพะปัะทะพะฒะฐัะตะปััะบะธะน ะพะฟัั

### ะะตะณะธัััะฐัะธั

1. ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั ะฟัะธะปะพะถะตะฝะธะต
2. ะะธะดะธั ัะพัะผั ัะตะณะธัััะฐัะธะธ ั ะฟัะธะฒะตัััะฒะตะฝะฝัะผ ัะพะพะฑัะตะฝะธะตะผ
3. ะะฒะพะดะธั email ะธ ะฟะฐัะพะปั
4. ะะฐะถะธะผะฐะตั "ะะฐัะตะณะธัััะธัะพะฒะฐัััั"
5. ะะฒัะพะผะฐัะธัะตัะบะธ ะฒัะพะดะธั ะฒ ัะธััะตะผั
6. ะะธะดะธั ะณะปะฐะฒะฝัั ัััะฐะฝะธัั ั 5 ะบัะตะดะธัะฐะผะธ

### ะัะพะด

1. ะะพะปัะทะพะฒะฐัะตะปั ะฒะฒะพะดะธั email ะธ ะฟะฐัะพะปั
2. ะะฐะถะธะผะฐะตั "ะะพะนัะธ"
3. ะะพะฟะฐะดะฐะตั ะฝะฐ ะณะปะฐะฒะฝัั ัััะฐะฝะธัั
4. ะะธะดะธั ัะฒะพะธ ะบัะตะดะธัั

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตัะฒะธัะฐ

1. ะะพะปัะทะพะฒะฐัะตะปั ะฒะฒะพะดะธั ัััะปะบั ะฝะฐ YouTube ะฒะธะดะตะพ
2. ะกะธััะตะผะฐ ะฟัะพะฒะตััะตั ะฝะฐะปะธัะธะต ะบัะตะดะธัะพะฒ
3. ะัะปะธ ะบัะตะดะธัั ะตััั โ ัะฟะธััะฒะฐะตััั 1 ะบัะตะดะธั ะธ ะฟะพะบะฐะทัะฒะฐะตััั ัะตะทัะปััะฐั
4. ะัะปะธ ะบัะตะดะธัะพะฒ ะฝะตั โ ะฟะพะบะฐะทัะฒะฐะตััั ัะพะพะฑัะตะฝะธะต ะพ ะฝะตะพะฑัะพะดะธะผะพััะธ ะฟะพะบัะฟะบะธ

## ะคะฐะนะปะพะฒะฐั ััััะบัััะฐ

```
app/
โโโ login/
โ   โโโ page.tsx              # ะกััะฐะฝะธัะฐ ะฒัะพะดะฐ/ัะตะณะธัััะฐัะธะธ
โโโ auth/
โ   โโโ callback/
โ       โโโ route.ts          # Callback ะดะปั OAuth
โโโ api/
โ   โโโ auth/
โ   โ   โโโ signup/
โ   โ   โ   โโโ route.ts      # API ัะตะณะธัััะฐัะธะธ
โ   โ   โโโ signin/
โ   โ   โ   โโโ route.ts      # API ะฒัะพะดะฐ
โ   โ   โโโ signout/
โ   โ   โ   โโโ route.ts      # API ะฒััะพะดะฐ
โ   โ   โโโ user/
โ   โ       โโโ route.ts      # API ะฟะพะปััะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั
โ   โโโ summarize/
โ       โโโ route.ts          # ะกััะตััะฒัััะธะน API (ะผะพะดะธัะธัะธัะพะฒะฐัั)
lib/
โโโ supabase/
โ   โโโ client.ts             # ะะปะธะตะฝััะบะธะน Supabase ะบะปะธะตะฝั
โ   โโโ server.ts             # ะกะตัะฒะตัะฝัะน Supabase ะบะปะธะตะฝั
โ   โโโ middleware.ts         # Middleware ะดะปั ัะตััะธะน
components/
โโโ auth/
โ   โโโ auth-form.tsx         # ะคะพัะผะฐ ะฒัะพะดะฐ/ัะตะณะธัััะฐัะธะธ
โ   โโโ user-menu.tsx         # ะะตะฝั ะฟะพะปัะทะพะฒะฐัะตะปั ั ะบัะตะดะธัะฐะผะธ
middleware.ts                 # Next.js middleware
```

## ะญัะฐะฟั ัะตะฐะปะธะทะฐัะธะธ

### ะญัะฐะฟ 1: ะะฐะทะฐ ะดะฐะฝะฝัั
1. ะกะพะทะดะฐัั ัะฐะฑะปะธัั profiles ัะตัะตะท MCP
2. ะกะพะทะดะฐัั ััะธะณะณะตั ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ัะพะทะดะฐะฝะธั ะฟัะพัะธะปั
3. ะะฐัััะพะธัั RLS ะฟะพะปะธัะธะบะธ
4. ะัะบะปััะธัั ะฟะพะดัะฒะตัะถะดะตะฝะธะต email ะฒ ะฝะฐัััะพะนะบะฐั

### ะญัะฐะฟ 2: ะะฝััะฐััััะบัััะฐ
1. ะฃััะฐะฝะพะฒะธัั npm ะฟะฐะบะตัั
2. ะกะพะทะดะฐัั ััะธะปะธัั ะดะปั Supabase
3. ะกะพะทะดะฐัั middleware
4. ะะฐัััะพะธัั ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

### ะญัะฐะฟ 3: UI ะบะพะผะฟะพะฝะตะฝัั
1. ะกะพะทะดะฐัั ัะพัะผั ะฒัะพะดะฐ/ัะตะณะธัััะฐัะธะธ
2. ะกะพะทะดะฐัั ะบะพะผะฟะพะฝะตะฝั ะพัะพะฑัะฐะถะตะฝะธั ะบัะตะดะธัะพะฒ
3. ะะพะดะธัะธัะธัะพะฒะฐัั ะณะปะฐะฒะฝัั ัััะฐะฝะธัั

### ะญัะฐะฟ 4: API
1. ะกะพะทะดะฐัั ัะพััั ะดะปั ะฐััะตะฝัะธัะธะบะฐัะธะธ
2. ะะพะดะธัะธัะธัะพะฒะฐัั API summarize ะดะปั ัะฐะฑะพัั ั ะบัะตะดะธัะฐะผะธ

### ะญัะฐะฟ 5: ะขะตััะธัะพะฒะฐะฝะธะต
1. ะัะพะฒะตัะธัั ัะตะณะธัััะฐัะธั
2. ะัะพะฒะตัะธัั ะฒัะพะด
3. ะัะพะฒะตัะธัั ัะธััะตะผั ะบัะตะดะธัะพะฒ
4. ะัะพะฒะตัะธัั ัะตะดะธัะตะบัั

## ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

```env
NEXT_PUBLIC_SUPABASE_URL=https://wdgchbnfgrnvgwduakmr.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=<anon_key>
```

## ะะตะทะพะฟะฐัะฝะพััั

1. RLS ะฟะพะปะธัะธะบะธ ะฝะฐ ะฒัะตั ัะฐะฑะปะธัะฐั
2. ะะฐะปะธะดะฐัะธั ะฝะฐ ัะตัะฒะตัะต
3. ะะฐัะธัะฐ ะพั ะฑััััะพััะฐ (ะฒัััะพะตะฝะพ ะฒ Supabase)
4. HTTPS ะดะปั ะฒัะตั ะทะฐะฟัะพัะพะฒ

## ะะธะทะฐะนะฝ UI

### ะคะพัะผะฐ ะฒัะพะดะฐ/ัะตะณะธัััะฐัะธะธ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                                     โ
โ         Summarizer.                 โ
โ                                     โ
โ   ะะพะฑัะพ ะฟะพะถะฐะปะพะฒะฐัั!                 โ
โ   ะะฐัะตะณะธัััะธััะนัะตัั ะธ ะฟะพะปััะธัะต      โ
โ   5 ะฑะตัะฟะปะฐัะฝัั ะบัะตะดะธัะพะฒ             โ
โ                                     โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ   โ Email                       โ   โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                     โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ   โ ะะฐัะพะปั                      โ   โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                     โ
โ   [ะะฐัะตะณะธัััะธัะพะฒะฐัััั]              โ
โ                                     โ
โ   ะฃะถะต ะตััั ะฐะบะบะฐัะฝั? ะะพะนัะธ           โ
โ                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Header ั ะบัะตะดะธัะฐะผะธ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Summarizer.          ๐ 5 | ะัะนัะธ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ะกะปะตะดัััะธะต ัะฐะณะธ

ะะพัะปะต ััะฒะตัะถะดะตะฝะธั ะฟะปะฐะฝะฐ, ะฟะตัะตะบะปััะธัััั ะฒ ัะตะถะธะผ Code ะดะปั ัะตะฐะปะธะทะฐัะธะธ.
